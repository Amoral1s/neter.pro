jQuery(document).ready((function(e){var o=["localhost","127.0.0.1","neter.local","localhost:3000"].includes(window.location.hostname)||window.location.hostname.endsWith(".local");function t(o){var t=o.serialize();e("input.submit").addClass("disabled"),e.ajax({url:woocommerce_params.ajax_url,type:"POST",data:t+"&action=submit_review",success:function(n){if(console.log(t),console.log(n),n.success)o.before('<div class="woocommerce-message">'+n.data.message+"</div>"),o.find('textarea, input[type="text"], input[type="email"]').val(""),o.find('input[name="rating"]').prop("checked",!1),console.log("Отзыв успешно отправлен"),e(".input").removeClass("listen");else{var a='<div class="woocommerce-error">';n.data&&n.data.error?a+=n.data.error:a+="Произошла неизвестная ошибка. Пожалуйста, попробуйте еще раз.",a+="</div>",o.before(a)}e("input.submit").removeClass("disabled")},error:function(o,t,n){console.log("AJAX ошибка:",n),e("input.submit").removeClass("disabled")}})}e("#review_form").on("submit","form",(function(n){n.preventDefault();var a=e(this);e(".woocommerce-error, .woocommerce-message").remove(),"undefined"==typeof grecaptcha||o?(console.log("reCAPTCHA not loaded or local environment"),t(a)):grecaptcha.ready((function(){grecaptcha.execute("6LeZlf8pAAAAALIprB1_PfRBJBKPfwXhT2IV3SWw",{action:"submit"}).then((function(e){console.log("reCAPTCHA token received:",e),a.prepend('<input type="hidden" name="recaptcha_response" value="'+e+'">'),t(a)}))}))}));const n=document.querySelectorAll(".wrapper-feed .comments > li");let a=0;if(n.forEach(((e,o)=>{a>=3?e.style.display="none":a++})),n.length>3){const e=document.createElement("div");e.classList.add("moar-btn"),e.textContent="Показать ещё",n[0].parentElement.appendChild(e),e.addEventListener("click",(function(){const o=Array.from(n).filter((e=>"none"===e.style.display));o.length>0?(o.forEach((e=>e.style.display="block")),e.textContent="Скрыть"):(n.forEach(((e,o)=>{o>=3&&(e.style.display="none")})),e.textContent="Показать ещё")}))}}));