jQuery(document).ready((function(e){var t=["localhost","127.0.0.1","neter.local","localhost:3000"].includes(window.location.hostname)||window.location.hostname.endsWith(".local");function o(t){var o=t.serialize();e("input.submit").addClass("disabled"),e.ajax({url:woocommerce_params.ajax_url,type:"POST",data:o+"&action=submit_review",success:function(o){if(o.success)t.before('<div class="woocommerce-message">'+o.data.message+"</div>"),t.find('textarea, input[type="text"], input[type="email"]').val(""),t.find('input[name="rating"]').prop("checked",!1),console.log("Отзыв успешно отправлен"),e(".input").removeClass("listen");else{var n='<div class="woocommerce-error">';o.data&&o.data.error?n+=o.data.error:n+="Произошла неизвестная ошибка. Пожалуйста, попробуйте еще раз.",n+="</div>",t.before(n)}e("input.submit").removeClass("disabled")},error:function(t,o,n){console.log("AJAX ошибка:",n),e("input.submit").removeClass("disabled")}})}e("#review_form").on("submit","form",(function(n){n.preventDefault();var a=e(this);e(".woocommerce-error, .woocommerce-message").remove(),"undefined"==typeof grecaptcha||t?(console.log("reCAPTCHA not loaded or local environment"),o(a)):grecaptcha.ready((function(){grecaptcha.execute("6LeZlf8pAAAAALIprB1_PfRBJBKPfwXhT2IV3SWw",{action:"submit"}).then((function(e){console.log("reCAPTCHA token received:",e),a.prepend('<input type="hidden" name="recaptcha_response" value="'+e+'">'),o(a)}))}))}));const n=document.querySelectorAll(".wrapper-feed .comments > li");let a=0;if(n.forEach(((e,t)=>{a>=3?e.style.display="none":a++})),n.length>3){const e=document.createElement("div");e.classList.add("moar-btn"),e.textContent="Показать ещё",n[0].parentElement.appendChild(e),e.addEventListener("click",(function(){const t=Array.from(n).filter((e=>"none"===e.style.display));t.length>0?(t.forEach((e=>e.style.display="block")),e.textContent="Скрыть"):(n.forEach(((e,t)=>{t>=3&&(e.style.display="none")})),e.textContent="Показать ещё")}))}}));